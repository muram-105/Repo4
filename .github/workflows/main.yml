name: Sync Repos

on:
  push:
    branches:
      - main

jobs:
  sync:
    runs-on: ubuntu-latest
    steps:
      # Checkout the original repository to a local directory
      - name: Checkout Original Repo
        uses: actions/checkout@v2
        with:
          repository: muram-105/Repo3
          ref: main
          path: original

      # Clone the original repository to a new directory
      - name: Clone Copied Repo
        run: |
          git clone --mirror Repo3/ Repo4/
        working-directory: .
        
      # Sync changes from the Repo3 repository to the copied repository
      - name: Sync Repos
        run: |
          cd copied.git
          git remote set-url origin ../Repo4
          git fetch -p origin 
          git push --mirror
